{"version":3,"sources":["../../src/pages/account/account.module.ts","../../src/pages/account/account.ts"],"names":[],"mappings":"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","file":"13.main.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { AccountPage } from './account';\r\n \r\n@NgModule({\r\n  declarations: [\r\n    AccountPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(AccountPage),\r\n  ],\r\n  exports: [\r\n    AccountPage\r\n  ]\r\n})\r\nexport class AccountPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/account/account.module.ts","import { Component } from '@angular/core';\r\n\r\nimport { IonicPage, AlertController, NavController, ModalController, LoadingController } from 'ionic-angular';\r\n\r\nimport { User, UserService } from '../../providers/user-service';\r\n\r\n@IonicPage()\r\n@Component({\r\n\tselector: 'page-account',\r\n\ttemplateUrl: 'account.html'\r\n})\r\nexport class AccountPage {\r\n\tuser: User;\r\n\tloading: any;\r\n\r\n\tconstructor(public alertCtrl: AlertController, public nav: NavController, public userService: UserService, public modalCtrl: ModalController, public loadingCtrl: LoadingController) {\r\n\r\n\t}\r\n\r\n\tngAfterViewInit() {\r\n\t\t// this.userService.getUser().then(data => {\r\n\t\t// \tthis.user = data;\r\n\t\t// })\r\n\t}\r\n\r\n\tionViewDidLoad() {\r\n\t\t\r\n\t\t// this.cartService.set(this.cart);\r\n\t\tthis.loadUser();\r\n\t}\r\n\r\n\tloadUser(){\r\n\t\tthis.loading = this.loadingCtrl.create();\r\n\t\tthis.loading.present().then(()=>{\r\n\t\t\tthis.userService.get()\r\n\t\t\t.then(data => {\r\n\t\t\t\tthis.loading.dismiss();\r\n\t\t\t\tthis.user = data;\r\n\t\t\t}, error => {\r\n\t\t\t\tthis.loading.dismiss();\r\n\t\t\t\t// console.log(error);\r\n\t\t\t});\r\n\t\t})\r\n\t}\r\n\r\n\tpresentUpdate() {\r\n\t\tlet user = new User(this.user);\r\n\t\tlet modal = this.modalCtrl.create('AccountUpdatePage', { user: user });\r\n\t\tmodal.present();\r\n\r\n\t\tmodal.onWillDismiss((data: User) => {\r\n\t\t\tif (data) {\r\n\t\t\t\tthis.user = data;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n\r\n\t// Present an alert with the current username populated\r\n\t// clicking OK will update the username and display it\r\n\t// clicking Cancel will close the alert and do nothing\r\n\tchangePassword() {\r\n\t\tlet alert = this.alertCtrl.create({\r\n\t\t\ttitle: 'Alterar password',\r\n\t\t\tbuttons: [\r\n\t\t\t\t'Cancelar'\r\n\t\t\t]\r\n\t\t});\r\n\t\talert.addInput({\r\n\t\t\tname: 'password',\r\n\t\t\tvalue: this.user.password,\r\n\t\t\tplaceholder: 'Password'\r\n\t\t});\r\n\t\talert.addInput({\r\n\t\t\tname: 'newPassword',\r\n\t\t\tvalue: this.user.newPassword,\r\n\t\t\tplaceholder: 'Nova Password'\r\n\t\t});\r\n\t\talert.addButton({\r\n\t\t\ttext: 'Ok',\r\n\t\t\thandler: (data: any) => {\r\n\t\t\t\tthis.loading = this.loadingCtrl.create();\r\n\t\t\t\tthis.loading.present().then(()=>{\r\n\t\t\t\t\tthis.userService.changePassword(data.password, data.newPassword).then(data => {\r\n\t\t\t\t\t\tthis.loading.dismiss();\r\n\t\t\t\t\t\tthis.user.token = data.data.token;\r\n\t\t\t\t\t\tthis.userService.setUser(this.user);\r\n\t\t\t\t\t\tthis.alert('Sucesso', 'Password alterada com sucesso.');\r\n\t\t\t\t\t}, error => {\r\n\t\t\t\t\t\tthis.loading.dismiss();\r\n\t\t\t\t\t\tswitch(error.status) {\r\n\t\t\t\t\t\t\tcase 403:\r\n\t\t\t\t\t\t\t\tthis.alert('Erro', 'Password errada.');\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tthis.alert('Erro', 'Ocorreu um erro a alterar a password.');\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\talert.present();\r\n\t}\r\n\r\n\tlogout() {\r\n\t\tthis.userService.logout();\r\n\t\tthis.nav.setRoot('LoginPage');\r\n\t}\r\n\r\n\talert(title: string, subtitle?: string) {\r\n\t\tlet alert = this.alertCtrl.create({\r\n\t\t\ttitle: title,\r\n\t\t\tsubTitle: subtitle,\r\n\t\t\tbuttons: ['Ok']\r\n\t\t});\r\n\t\talert.present();\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/account/account.ts"],"sourceRoot":""}